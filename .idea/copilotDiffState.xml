<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/components/coaching/management/coaching-branch-form.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/components/coaching/management/coaching-branch-form.tsx" />
              <option name="originalContent" value="/**&#10; * Coaching Branch Form Component&#10; * &#10; * Form for creating and updating coaching center branches&#10; * Only users with role 'C' (Coach) can create/edit branches&#10; */&#10;&#10;&quot;use client&quot;;&#10;&#10;import { useState, useEffect } from &quot;react&quot;;&#10;import { useForm } from &quot;react-hook-form&quot;;&#10;import { zodResolver } from &quot;@hookform/resolvers/zod&quot;;&#10;import { z } from &quot;zod&quot;;&#10;import { Loader2, AlertCircle, Search, X, CheckCircle2, MapPin } from &quot;lucide-react&quot;;&#10;import { Button } from &quot;@/components/ui/button&quot;;&#10;import { Input } from &quot;@/components/ui/input&quot;;&#10;import { Textarea } from &quot;@/components/ui/textarea&quot;;&#10;import { Label } from &quot;@/components/ui/label&quot;;&#10;import { Alert, AlertDescription } from &quot;@/components/ui/alert&quot;;&#10;import { Switch } from &quot;@/components/ui/switch&quot;;&#10;import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &quot;@/components/ui/card&quot;;&#10;import { coachingBranchFormSchema, COACHING_VALIDATION_LIMITS } from &quot;@/lib/validations/coaching.validation&quot;;&#10;import { CoachingBranch } from &quot;@/lib/schema/coaching.types&quot;;&#10;import { showSuccessToast, showErrorToast } from &quot;@/lib/toast&quot;;&#10;import { useCoachingStore } from &quot;@/lib/coaching&quot;;&#10;import { ProfileAPI } from &quot;@/lib/profile&quot;;&#10;import type { PublicProfile } from &quot;@/lib/schema/profile.types&quot;;&#10;import { AddressManager } from &quot;@/components/address/address-manager&quot;;&#10;import type { Address } from &quot;@/lib/schema/address.types&quot;;&#10;&#10;type CoachingBranchFormData = z.infer&lt;typeof coachingBranchFormSchema&gt;;&#10;&#10;interface CoachingBranchFormProps {&#10;    coachingCenterId: string;&#10;    centerOwnerId: string; // The owner of the coaching center (default manager)&#10;    initialData?: Partial&lt;CoachingBranch&gt;;&#10;    onSuccess?: () =&gt; void;&#10;    onCancel: () =&gt; void;&#10;}&#10;&#10;export function CoachingBranchForm({&#10;    coachingCenterId,&#10;    centerOwnerId,&#10;    initialData,&#10;    onSuccess,&#10;    onCancel,&#10;}: CoachingBranchFormProps) {&#10;    const [isSubmitting, setIsSubmitting] = useState(false);&#10;    const [managerUsername, setManagerUsername] = useState(&quot;&quot;);&#10;    const [searchingManager, setSearchingManager] = useState(false);&#10;    const [selectedManager, setSelectedManager] = useState&lt;PublicProfile | null&gt;(null);&#10;    const [managerError, setManagerError] = useState&lt;string | null&gt;(null);&#10;    const [selectedAddress, setSelectedAddress] = useState&lt;Address | null&gt;(null);&#10;    const [showAddressManager, setShowAddressManager] = useState(false);&#10;    const { createCoachingBranch, updateCoachingBranch } = useCoachingStore();&#10;&#10;    const isEditMode = !!initialData?.id;&#10;&#10;    const {&#10;        register,&#10;        handleSubmit,&#10;        setValue,&#10;        watch,&#10;        formState: { errors },&#10;    } = useForm&lt;CoachingBranchFormData&gt;({&#10;        resolver: zodResolver(coachingBranchFormSchema),&#10;        defaultValues: {&#10;            name: initialData?.name || &quot;&quot;,&#10;            description: initialData?.description || &quot;&quot;,&#10;            phone: initialData?.phone || &quot;&quot;,&#10;            email: initialData?.email || &quot;&quot;,&#10;            is_main_branch: initialData?.is_main_branch || false,&#10;            is_active: initialData?.is_active !== undefined ? initialData.is_active : true,&#10;        },&#10;    });&#10;&#10;    const description = watch(&quot;description&quot;);&#10;    const isMainBranch = watch(&quot;is_main_branch&quot;);&#10;    const isActive = watch(&quot;is_active&quot;);&#10;&#10;    // Handle manager search by username&#10;    const handleSearchManager = async () =&gt; {&#10;        if (!managerUsername.trim()) {&#10;            setManagerError(&quot;Please enter a username&quot;);&#10;            return;&#10;        }&#10;&#10;        setSearchingManager(true);&#10;        setManagerError(null);&#10;&#10;        try {&#10;            const profile = await ProfileAPI.getProfileByUsername(managerUsername.trim());&#10;&#10;            if (profile) {&#10;                // Check if user has appropriate role (Coach, Teacher, Admin)&#10;                if (!['C', 'T', 'A', 'SA'].includes(profile.role || '')) {&#10;                    setManagerError(&quot;User must have Coach, Teacher, or Admin role&quot;);&#10;                    setSelectedManager(null);&#10;                    return;&#10;                }&#10;&#10;                setSelectedManager(profile);&#10;                setManagerError(null);&#10;                showSuccessToast(`Manager found: ${profile.full_name || profile.username}`);&#10;            } else {&#10;                setManagerError(&quot;User not found&quot;);&#10;                setSelectedManager(null);&#10;            }&#10;        } catch (error) {&#10;            console.error(&quot;Error searching manager:&quot;, error);&#10;            setManagerError(&quot;Failed to search user&quot;);&#10;            setSelectedManager(null);&#10;        } finally {&#10;            setSearchingManager(false);&#10;        }&#10;    };&#10;&#10;    // Clear selected manager&#10;    const handleClearManager = () =&gt; {&#10;        setSelectedManager(null);&#10;        setManagerUsername(&quot;&quot;);&#10;        setManagerError(null);&#10;    };&#10;&#10;    // Handle form submission&#10;    const handleFormSubmit = async (data: CoachingBranchFormData) =&gt; {&#10;        setIsSubmitting(true);&#10;&#10;        try {&#10;            // Determine manager_id: use selected manager, or default to center owner&#10;            const managerId = selectedManager?.id || centerOwnerId;&#10;&#10;            if (isEditMode &amp;&amp; initialData?.id) {&#10;                // Update existing branch&#10;                const updateData = {&#10;                    name: data.name,&#10;                    description: data.description || null,&#10;                    phone: data.phone || null,&#10;                    email: data.email || null,&#10;                    is_main_branch: data.is_main_branch,&#10;                    is_active: data.is_active,&#10;                    manager_id: managerId,&#10;                };&#10;&#10;                const result = await updateCoachingBranch(initialData.id, updateData);&#10;&#10;                if (result) {&#10;                    showSuccessToast(&quot;Branch updated successfully!&quot;);&#10;                    onSuccess?.();&#10;                } else {&#10;                    showErrorToast(&quot;Failed to update branch&quot;);&#10;                }&#10;            } else {&#10;                // Create new branch&#10;                const branchData = {&#10;                    coaching_center_id: coachingCenterId,&#10;                    name: data.name,&#10;                    description: data.description || null,&#10;                    phone: data.phone || null,&#10;                    email: data.email || null,&#10;                    is_main_branch: data.is_main_branch,&#10;                    is_active: data.is_active,&#10;                    manager_id: managerId, // Default to center owner or selected manager&#10;                };&#10;&#10;                const result = await createCoachingBranch(branchData);&#10;&#10;                if (result) {&#10;                    showSuccessToast(&quot;Branch created successfully!&quot;);&#10;                    onSuccess?.();&#10;                } else {&#10;                    showErrorToast(&quot;Failed to create branch&quot;);&#10;                }&#10;            }&#10;        } catch (error) {&#10;            console.error(&quot;Branch form submission error:&quot;, error);&#10;            showErrorToast(error instanceof Error ? error.message : &quot;Failed to save branch&quot;);&#10;        } finally {&#10;            setIsSubmitting(false);&#10;        }&#10;    };&#10;&#10;    return (&#10;        &lt;form onSubmit={handleSubmit(handleFormSubmit)} className=&quot;space-y-6&quot;&gt;&#10;            {/* Branch Name */}&#10;            &lt;div className=&quot;space-y-2&quot;&gt;&#10;                &lt;Label htmlFor=&quot;name&quot;&gt;&#10;                    Branch Name &lt;span className=&quot;text-destructive&quot;&gt;*&lt;/span&gt;&#10;                &lt;/Label&gt;&#10;                &lt;Input&#10;                    id=&quot;name&quot;&#10;                    {...register(&quot;name&quot;)}&#10;                    placeholder=&quot;Enter branch name (e.g., Main Branch, North Campus)&quot;&#10;                    maxLength={COACHING_VALIDATION_LIMITS.NAME_MAX}&#10;                /&gt;&#10;                {errors.name &amp;&amp; (&#10;                    &lt;p className=&quot;text-sm text-destructive mt-1&quot;&gt;{errors.name.message}&lt;/p&gt;&#10;                )}&#10;                &lt;p className=&quot;text-xs text-muted-foreground&quot;&gt;&#10;                    Give your branch a clear, descriptive name&#10;                &lt;/p&gt;&#10;            &lt;/div&gt;&#10;&#10;            {/* Description */}&#10;            &lt;div className=&quot;space-y-2&quot;&gt;&#10;                &lt;Label htmlFor=&quot;description&quot;&gt;Description&lt;/Label&gt;&#10;                &lt;Textarea&#10;                    id=&quot;description&quot;&#10;                    {...register(&quot;description&quot;)}&#10;                    placeholder=&quot;Describe this branch location, facilities, or special features&quot;&#10;                    rows={3}&#10;                    maxLength={COACHING_VALIDATION_LIMITS.DESCRIPTION_MAX}&#10;                /&gt;&#10;                &lt;div className=&quot;flex justify-between&quot;&gt;&#10;                    &lt;div&gt;&#10;                        {errors.description &amp;&amp; (&#10;                            &lt;p className=&quot;text-sm text-destructive&quot;&gt;{errors.description.message}&lt;/p&gt;&#10;                        )}&#10;                    &lt;/div&gt;&#10;                    &lt;p className=&quot;text-xs text-muted-foreground&quot;&gt;&#10;                        {description?.length || 0} / {COACHING_VALIDATION_LIMITS.DESCRIPTION_MAX}&#10;                    &lt;/p&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            {/* Contact Information */}&#10;            &lt;div className=&quot;space-y-4&quot;&gt;&#10;                &lt;h3 className=&quot;text-sm font-semibold&quot;&gt;Contact Information&lt;/h3&gt;&#10;&#10;                &lt;div className=&quot;space-y-2&quot;&gt;&#10;                    &lt;Label htmlFor=&quot;phone&quot;&gt;Phone&lt;/Label&gt;&#10;                    &lt;Input&#10;                        id=&quot;phone&quot;&#10;                        {...register(&quot;phone&quot;)}&#10;                        placeholder=&quot;+1234567890&quot;&#10;                        type=&quot;tel&quot;&#10;                    /&gt;&#10;                    {errors.phone &amp;&amp; (&#10;                        &lt;p className=&quot;text-sm text-destructive mt-1&quot;&gt;{errors.phone.message}&lt;/p&gt;&#10;                    )}&#10;                &lt;/div&gt;&#10;&#10;                &lt;div className=&quot;space-y-2&quot;&gt;&#10;                    &lt;Label htmlFor=&quot;email&quot;&gt;Email&lt;/Label&gt;&#10;                    &lt;Input&#10;                        id=&quot;email&quot;&#10;                        {...register(&quot;email&quot;)}&#10;                        placeholder=&quot;branch@example.com&quot;&#10;                        type=&quot;email&quot;&#10;                    /&gt;&#10;                    {errors.email &amp;&amp; (&#10;                        &lt;p className=&quot;text-sm text-destructive mt-1&quot;&gt;{errors.email.message}&lt;/p&gt;&#10;                    )}&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            {/* Branch Manager */}&#10;            &lt;div className=&quot;space-y-4&quot;&gt;&#10;                &lt;h3 className=&quot;text-sm font-semibold&quot;&gt;Branch Manager (Optional)&lt;/h3&gt;&#10;                &lt;Alert&gt;&#10;                    &lt;AlertCircle className=&quot;h-4 w-4&quot; /&gt;&#10;                    &lt;AlertDescription&gt;&#10;                        By default, the coaching center owner will be set as the branch manager.&#10;                        You can optionally assign a different user as the manager by searching their username.&#10;                    &lt;/AlertDescription&gt;&#10;                &lt;/Alert&gt;&#10;&#10;                {!selectedManager ? (&#10;                    &lt;div className=&quot;space-y-2&quot;&gt;&#10;                        &lt;Label htmlFor=&quot;manager_username&quot;&gt;Search Manager by Username&lt;/Label&gt;&#10;                        &lt;div className=&quot;flex gap-2&quot;&gt;&#10;                            &lt;Input&#10;                                id=&quot;manager_username&quot;&#10;                                value={managerUsername}&#10;                                onChange={(e) =&gt; setManagerUsername(e.target.value)}&#10;                                placeholder=&quot;Enter username (e.g., john_doe)&quot;&#10;                                onKeyDown={(e) =&gt; {&#10;                                    if (e.key === &quot;Enter&quot;) {&#10;                                        e.preventDefault();&#10;                                        handleSearchManager();&#10;                                    }&#10;                                }}&#10;                                disabled={searchingManager}&#10;                            /&gt;&#10;                            &lt;Button&#10;                                type=&quot;button&quot;&#10;                                onClick={handleSearchManager}&#10;                                disabled={searchingManager || !managerUsername.trim()}&#10;                                variant=&quot;outline&quot;&#10;                            &gt;&#10;                                {searchingManager ? (&#10;                                    &lt;Loader2 className=&quot;h-4 w-4 animate-spin&quot; /&gt;&#10;                                ) : (&#10;                                    &lt;Search className=&quot;h-4 w-4&quot; /&gt;&#10;                                )}&#10;                            &lt;/Button&gt;&#10;                        &lt;/div&gt;&#10;                        {managerError &amp;&amp; (&#10;                            &lt;p className=&quot;text-sm text-destructive&quot;&gt;{managerError}&lt;/p&gt;&#10;                        )}&#10;                        &lt;p className=&quot;text-xs text-muted-foreground&quot;&gt;&#10;                            Leave blank to use the center owner as the default manager&#10;                        &lt;/p&gt;&#10;                    &lt;/div&gt;&#10;                ) : (&#10;                    &lt;div className=&quot;p-4 border rounded-lg bg-muted/50 space-y-3&quot;&gt;&#10;                        &lt;div className=&quot;flex items-center justify-between&quot;&gt;&#10;                            &lt;div className=&quot;flex items-center gap-2&quot;&gt;&#10;                                &lt;CheckCircle2 className=&quot;h-5 w-5 text-green-500&quot; /&gt;&#10;                                &lt;span className=&quot;font-medium&quot;&gt;Manager Selected&lt;/span&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;Button&#10;                                type=&quot;button&quot;&#10;                                variant=&quot;ghost&quot;&#10;                                size=&quot;sm&quot;&#10;                                onClick={handleClearManager}&#10;                            &gt;&#10;                                &lt;X className=&quot;h-4 w-4&quot; /&gt;&#10;                            &lt;/Button&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div className=&quot;space-y-1&quot;&gt;&#10;                            &lt;p className=&quot;text-sm&quot;&gt;&#10;                                &lt;span className=&quot;text-muted-foreground&quot;&gt;Name:&lt;/span&gt;{&quot; &quot;}&#10;                                &lt;span className=&quot;font-medium&quot;&gt;{selectedManager.full_name || &quot;N/A&quot;}&lt;/span&gt;&#10;                            &lt;/p&gt;&#10;                            &lt;p className=&quot;text-sm&quot;&gt;&#10;                                &lt;span className=&quot;text-muted-foreground&quot;&gt;Username:&lt;/span&gt;{&quot; &quot;}&#10;                                &lt;span className=&quot;font-medium&quot;&gt;{`@${selectedManager.username}`}&lt;/span&gt;&#10;                            &lt;/p&gt;&#10;                            &lt;p className=&quot;text-sm&quot;&gt;&#10;                                &lt;span className=&quot;text-muted-foreground&quot;&gt;Role:&lt;/span&gt;{&quot; &quot;}&#10;                                &lt;span className=&quot;font-medium&quot;&gt;&#10;                                    {selectedManager.role === 'C' ? 'Coach' :&#10;                                        selectedManager.role === 'T' ? 'Teacher' :&#10;                                            selectedManager.role === 'A' ? 'Admin' :&#10;                                                selectedManager.role === 'SA' ? 'Super Admin' :&#10;                                                    selectedManager.role}&#10;                                &lt;/span&gt;&#10;                            &lt;/p&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                )}&#10;            &lt;/div&gt;&#10;&#10;            {/* Branch Location/Address */}&#10;            &lt;div className=&quot;space-y-4&quot;&gt;&#10;                &lt;div className=&quot;flex items-center justify-between&quot;&gt;&#10;                    &lt;h3 className=&quot;text-sm font-semibold&quot;&gt;Branch Location&lt;/h3&gt;&#10;                    {selectedAddress &amp;&amp; !showAddressManager &amp;&amp; (&#10;                        &lt;Button&#10;                            type=&quot;button&quot;&#10;                            variant=&quot;outline&quot;&#10;                            size=&quot;sm&quot;&#10;                            onClick={() =&gt; setShowAddressManager(true)}&#10;                        &gt;&#10;                            &lt;MapPin className=&quot;h-4 w-4 mr-2&quot; /&gt;&#10;                            Change Address&#10;                        &lt;/Button&gt;&#10;                    )}&#10;                &lt;/div&gt;&#10;                {!showAddressManager &amp;&amp; selectedAddress &amp;&amp; (&#10;                    &lt;Card className=&quot;border-primary&quot;&gt;&#10;                        &lt;CardHeader&gt;&#10;                            &lt;div className=&quot;flex items-start justify-between&quot;&gt;&#10;                                &lt;div&gt;&#10;                                    &lt;CardTitle className=&quot;text-base&quot;&gt;Selected Branch Address&lt;/CardTitle&gt;&#10;                                    &lt;CardDescription&gt;{selectedAddress.address_type}&lt;/CardDescription&gt;&#10;                                &lt;/div&gt;&#10;                                &lt;Button&#10;                                    type=&quot;button&quot;&#10;                                    variant=&quot;ghost&quot;&#10;                                    size=&quot;sm&quot;&#10;                                    onClick={() =&gt; setSelectedAddress(null)}&#10;                                &gt;&#10;                                    &lt;X className=&quot;h-4 w-4&quot; /&gt;&#10;                                &lt;/Button&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/CardHeader&gt;&#10;                        &lt;CardContent className=&quot;space-y-2 text-sm&quot;&gt;&#10;                            {selectedAddress.label &amp;&amp; (&#10;                                &lt;p className=&quot;font-medium&quot;&gt;{selectedAddress.label}&lt;/p&gt;&#10;                            )}&#10;                            {selectedAddress.address_line_1 &amp;&amp; (&#10;                                &lt;p className=&quot;text-muted-foreground&quot;&gt;{selectedAddress.address_line_1}&lt;/p&gt;&#10;                            )}&#10;                            {selectedAddress.address_line_2 &amp;&amp; (&#10;                                &lt;p className=&quot;text-muted-foreground&quot;&gt;{selectedAddress.address_line_2}&lt;/p&gt;&#10;                            )}&#10;                            &lt;p className=&quot;text-muted-foreground&quot;&gt;&#10;                                {[selectedAddress.city, selectedAddress.district, selectedAddress.state, selectedAddress.pin_code]&#10;                                    .filter(Boolean)&#10;                                    .join(', ')}&#10;                            &lt;/p&gt;&#10;                        &lt;/CardContent&gt;&#10;                    &lt;/Card&gt;&#10;                )}&#10;&#10;                {!showAddressManager &amp;&amp; !selectedAddress &amp;&amp; (&#10;                    &lt;Button&#10;                        type=&quot;button&quot;&#10;                        variant=&quot;outline&quot;&#10;                        onClick={() =&gt; setShowAddressManager(true)}&#10;                        className=&quot;w-full&quot;&#10;                    &gt;&#10;                        &lt;MapPin className=&quot;h-4 w-4 mr-2&quot; /&gt;&#10;                        Add or Select Branch Address&#10;                    &lt;/Button&gt;&#10;                )}&#10;&#10;                {showAddressManager &amp;&amp; (&#10;                    &lt;Card&gt;&#10;                        &lt;CardHeader&gt;&#10;                            &lt;div className=&quot;flex items-start justify-between&quot;&gt;&#10;                                &lt;div&gt;&#10;                                    &lt;CardTitle&gt;Manage Branch Address&lt;/CardTitle&gt;&#10;                                    &lt;CardDescription&gt;&#10;                                        Select an existing address or create a new one for this branch&#10;                                    &lt;/CardDescription&gt;&#10;                                &lt;/div&gt;&#10;                                &lt;Button&#10;                                    type=&quot;button&quot;&#10;                                    variant=&quot;ghost&quot;&#10;                                    size=&quot;sm&quot;&#10;                                    onClick={() =&gt; setShowAddressManager(false)}&#10;                                &gt;&#10;                                    &lt;X className=&quot;h-4 w-4&quot; /&gt;&#10;                                &lt;/Button&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/CardHeader&gt;&#10;                        &lt;CardContent&gt;&#10;                            &lt;AddressManager&#10;                                onAddressSelect={(address) =&gt; {&#10;                                    setSelectedAddress(address);&#10;                                    setShowAddressManager(false);&#10;                                    showSuccessToast(&quot;Address selected for branch&quot;);&#10;                                }}&#10;                                showAddButton={true}&#10;                                allowEdit={true}&#10;                                allowDelete={true}&#10;                                allowSetPrimary={false}&#10;                            /&gt;&#10;                        &lt;/CardContent&gt;&#10;                    &lt;/Card&gt;&#10;                )}&#10;            &lt;/div&gt;&#10;&#10;            {/* Branch Settings */}&#10;            &lt;div className=&quot;space-y-4&quot;&gt;&#10;                &lt;h3 className=&quot;text-sm font-semibold&quot;&gt;Branch Settings&lt;/h3&gt;&#10;&#10;                {/* Main Branch Toggle */}&#10;                &lt;div className=&quot;flex items-center justify-between p-4 border rounded-lg&quot;&gt;&#10;                    &lt;div className=&quot;space-y-0.5&quot;&gt;&#10;                        &lt;Label htmlFor=&quot;is_main_branch&quot; className=&quot;text-base&quot;&gt;&#10;                            Main Branch&#10;                        &lt;/Label&gt;&#10;                        &lt;p className=&quot;text-sm text-muted-foreground&quot;&gt;&#10;                            Mark this as the primary/headquarters branch&#10;                        &lt;/p&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;Switch&#10;                        id=&quot;is_main_branch&quot;&#10;                        checked={isMainBranch}&#10;                        onCheckedChange={(checked) =&gt; setValue(&quot;is_main_branch&quot;, checked)}&#10;                    /&gt;&#10;                &lt;/div&gt;&#10;&#10;                {/* Active Status Toggle */}&#10;                &lt;div className=&quot;flex items-center justify-between p-4 border rounded-lg&quot;&gt;&#10;                    &lt;div className=&quot;space-y-0.5&quot;&gt;&#10;                        &lt;Label htmlFor=&quot;is_active&quot; className=&quot;text-base&quot;&gt;&#10;                            Active Status&#10;                        &lt;/Label&gt;&#10;                        &lt;p className=&quot;text-sm text-muted-foreground&quot;&gt;&#10;                            {isActive&#10;                                ? &quot;Branch is currently active and visible&quot;&#10;                                : &quot;Branch is inactive and hidden from public view&quot;}&#10;                        &lt;/p&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;Switch&#10;                        id=&quot;is_active&quot;&#10;                        checked={isActive}&#10;                        onCheckedChange={(checked) =&gt; setValue(&quot;is_active&quot;, checked)}&#10;                    /&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            {/* Info Alert */}&#10;            {!isEditMode &amp;&amp; (&#10;                &lt;Alert&gt;&#10;                    &lt;AlertCircle className=&quot;h-4 w-4&quot; /&gt;&#10;                    &lt;AlertDescription&gt;&#10;                        After creating the branch, you can add address information through the address management system.&#10;                    &lt;/AlertDescription&gt;&#10;                &lt;/Alert&gt;&#10;            )}&#10;&#10;            {/* Form Actions */}&#10;            &lt;div className=&quot;flex gap-3 justify-end pt-4 border-t&quot;&gt;&#10;                &lt;Button&#10;                    type=&quot;button&quot;&#10;                    variant=&quot;outline&quot;&#10;                    onClick={onCancel}&#10;                    disabled={isSubmitting}&#10;                &gt;&#10;                    Cancel&#10;                &lt;/Button&gt;&#10;                &lt;Button type=&quot;submit&quot; disabled={isSubmitting}&gt;&#10;                    {isSubmitting ? (&#10;                        &lt;&gt;&#10;                            &lt;Loader2 className=&quot;mr-2 h-4 w-4 animate-spin&quot; /&gt;&#10;                            {isEditMode ? &quot;Updating...&quot; : &quot;Creating...&quot;}&#10;                        &lt;/&gt;&#10;                    ) : (&#10;                        isEditMode ? &quot;Update Branch&quot; : &quot;Create Branch&quot;&#10;                    )}&#10;                &lt;/Button&gt;&#10;            &lt;/div&gt;&#10;        &lt;/form&gt;&#10;    );&#10;}&#10;" />
              <option name="updatedContent" value="/**&#10; * Coaching Branch Form Component&#10; * &#10; * Form for creating and updating coaching center branches&#10; * Only users with role 'C' (Coach) can create/edit branches&#10; */&#10;&#10;&quot;use client&quot;;&#10;&#10;import { useState } from &quot;react&quot;;&#10;import { useForm } from &quot;react-hook-form&quot;;&#10;import { zodResolver } from &quot;@hookform/resolvers/zod&quot;;&#10;import { z } from &quot;zod&quot;;&#10;import { Loader2, AlertCircle, Search, X, CheckCircle2, MapPin } from &quot;lucide-react&quot;;&#10;import { Button } from &quot;@/components/ui/button&quot;;&#10;import { Input } from &quot;@/components/ui/input&quot;;&#10;import { Textarea } from &quot;@/components/ui/textarea&quot;;&#10;import { Label } from &quot;@/components/ui/label&quot;;&#10;import { Alert, AlertDescription } from &quot;@/components/ui/alert&quot;;&#10;import { Switch } from &quot;@/components/ui/switch&quot;;&#10;import { Card, CardContent, CardDescription, CardHeader, CardTitle } from &quot;@/components/ui/card&quot;;&#10;import { coachingBranchFormSchema, COACHING_VALIDATION_LIMITS } from &quot;@/lib/validations/coaching.validation&quot;;&#10;import { CoachingBranch } from &quot;@/lib/schema/coaching.types&quot;;&#10;import { showSuccessToast, showErrorToast } from &quot;@/lib/toast&quot;;&#10;import { useCoachingStore } from &quot;@/lib/coaching&quot;;&#10;import { ProfileAPI } from &quot;@/lib/profile&quot;;&#10;import type { PublicProfile } from &quot;@/lib/schema/profile.types&quot;;&#10;import { AddressManager } from &quot;@/components/address/address-manager&quot;;&#10;import type { Address } from &quot;@/lib/schema/address.types&quot;;&#10;&#10;type CoachingBranchFormData = z.infer&lt;typeof coachingBranchFormSchema&gt;;&#10;&#10;interface CoachingBranchFormProps {&#10;    coachingCenterId: string;&#10;    centerOwnerId: string; // The owner of the coaching center (default manager)&#10;    initialData?: Partial&lt;CoachingBranch&gt;;&#10;    onSuccess?: () =&gt; void;&#10;    onCancel: () =&gt; void;&#10;}&#10;&#10;export function CoachingBranchForm({&#10;    coachingCenterId,&#10;    centerOwnerId,&#10;    initialData,&#10;    onSuccess,&#10;    onCancel,&#10;}: CoachingBranchFormProps) {&#10;    const [isSubmitting, setIsSubmitting] = useState(false);&#10;    const [managerUsername, setManagerUsername] = useState(&quot;&quot;);&#10;    const [searchingManager, setSearchingManager] = useState(false);&#10;    const [selectedManager, setSelectedManager] = useState&lt;PublicProfile | null&gt;(null);&#10;    const [managerError, setManagerError] = useState&lt;string | null&gt;(null);&#10;    const [selectedAddress, setSelectedAddress] = useState&lt;Address | null&gt;(null);&#10;    const [showAddressManager, setShowAddressManager] = useState(false);&#10;    const { createCoachingBranch, updateCoachingBranch } = useCoachingStore();&#10;&#10;    const isEditMode = !!initialData?.id;&#10;&#10;    const {&#10;        register,&#10;        handleSubmit,&#10;        setValue,&#10;        watch,&#10;        formState: { errors },&#10;    } = useForm&lt;CoachingBranchFormData&gt;({&#10;        resolver: zodResolver(coachingBranchFormSchema),&#10;        defaultValues: {&#10;            name: initialData?.name || &quot;&quot;,&#10;            description: initialData?.description || &quot;&quot;,&#10;            phone: initialData?.phone || &quot;&quot;,&#10;            email: initialData?.email || &quot;&quot;,&#10;            is_main_branch: initialData?.is_main_branch || false,&#10;            is_active: initialData?.is_active !== undefined ? initialData.is_active : true,&#10;        },&#10;    });&#10;&#10;    const description = watch(&quot;description&quot;);&#10;    const isMainBranch = watch(&quot;is_main_branch&quot;);&#10;    const isActive = watch(&quot;is_active&quot;);&#10;&#10;    // Handle manager search by username&#10;    const handleSearchManager = async () =&gt; {&#10;        if (!managerUsername.trim()) {&#10;            setManagerError(&quot;Please enter a username&quot;);&#10;            return;&#10;        }&#10;&#10;        setSearchingManager(true);&#10;        setManagerError(null);&#10;&#10;        try {&#10;            const profile = await ProfileAPI.getProfileByUsername(managerUsername.trim());&#10;&#10;            if (profile) {&#10;                // Check if user has appropriate role (Coach, Teacher, Admin)&#10;                if (!['C', 'T', 'A', 'SA'].includes(profile.role || '')) {&#10;                    setManagerError(&quot;User must have Coach, Teacher, or Admin role&quot;);&#10;                    setSelectedManager(null);&#10;                    return;&#10;                }&#10;&#10;                setSelectedManager(profile);&#10;                setManagerError(null);&#10;                showSuccessToast(`Manager found: ${profile.full_name || profile.username}`);&#10;            } else {&#10;                setManagerError(&quot;User not found&quot;);&#10;                setSelectedManager(null);&#10;            }&#10;        } catch (error) {&#10;            console.error(&quot;Error searching manager:&quot;, error);&#10;            setManagerError(&quot;Failed to search user&quot;);&#10;            setSelectedManager(null);&#10;        } finally {&#10;            setSearchingManager(false);&#10;        }&#10;    };&#10;&#10;    // Clear selected manager&#10;    const handleClearManager = () =&gt; {&#10;        setSelectedManager(null);&#10;        setManagerUsername(&quot;&quot;);&#10;        setManagerError(null);&#10;    };&#10;&#10;    // Handle form submission&#10;    const handleFormSubmit = async (data: CoachingBranchFormData) =&gt; {&#10;        setIsSubmitting(true);&#10;&#10;        try {&#10;            // Determine manager_id: use selected manager, or default to center owner&#10;            const managerId = selectedManager?.id || centerOwnerId;&#10;&#10;            if (isEditMode &amp;&amp; initialData?.id) {&#10;                // Update existing branch&#10;                const updateData = {&#10;                    name: data.name,&#10;                    description: data.description || null,&#10;                    phone: data.phone || null,&#10;                    email: data.email || null,&#10;                    is_main_branch: data.is_main_branch,&#10;                    is_active: data.is_active,&#10;                    manager_id: managerId,&#10;                    ...(selectedAddress ? { address_id: selectedAddress.id } : {}),&#10;                };&#10;&#10;                const result = await updateCoachingBranch(initialData.id, updateData);&#10;&#10;                if (result) {&#10;                    showSuccessToast(&quot;Branch updated successfully!&quot;);&#10;                    onSuccess?.();&#10;                } else {&#10;                    showErrorToast(&quot;Failed to update branch&quot;);&#10;                }&#10;            } else {&#10;                // Create new branch&#10;                const branchData = {&#10;                    coaching_center_id: coachingCenterId,&#10;                    name: data.name,&#10;                    description: data.description || null,&#10;                    phone: data.phone || null,&#10;                    email: data.email || null,&#10;                    is_main_branch: data.is_main_branch,&#10;                    is_active: data.is_active,&#10;                    manager_id: managerId, // Default to center owner or selected manager&#10;                    ...(selectedAddress ? { address_id: selectedAddress.id } : {}),&#10;                };&#10;&#10;                const result = await createCoachingBranch(branchData);&#10;&#10;                if (result) {&#10;                    showSuccessToast(&quot;Branch created successfully!&quot;);&#10;                    onSuccess?.();&#10;                } else {&#10;                    showErrorToast(&quot;Failed to create branch&quot;);&#10;                }&#10;            }&#10;        } catch (error) {&#10;            console.error(&quot;Branch form submission error:&quot;, error);&#10;            showErrorToast(error instanceof Error ? error.message : &quot;Failed to save branch&quot;);&#10;        } finally {&#10;            setIsSubmitting(false);&#10;        }&#10;    };&#10;&#10;    return (&#10;        &lt;form onSubmit={handleSubmit(handleFormSubmit)} className=&quot;space-y-6&quot;&gt;&#10;            {/* Branch Name */}&#10;            &lt;div className=&quot;space-y-2&quot;&gt;&#10;                &lt;Label htmlFor=&quot;name&quot;&gt;&#10;                    Branch Name &lt;span className=&quot;text-destructive&quot;&gt;*&lt;/span&gt;&#10;                &lt;/Label&gt;&#10;                &lt;Input&#10;                    id=&quot;name&quot;&#10;                    {...register(&quot;name&quot;)}&#10;                    placeholder=&quot;Enter branch name (e.g., Main Branch, North Campus)&quot;&#10;                    maxLength={COACHING_VALIDATION_LIMITS.NAME_MAX}&#10;                /&gt;&#10;                {errors.name &amp;&amp; (&#10;                    &lt;p className=&quot;text-sm text-destructive mt-1&quot;&gt;{errors.name.message}&lt;/p&gt;&#10;                )}&#10;                &lt;p className=&quot;text-xs text-muted-foreground&quot;&gt;&#10;                    Give your branch a clear, descriptive name&#10;                &lt;/p&gt;&#10;            &lt;/div&gt;&#10;&#10;            {/* Description */}&#10;            &lt;div className=&quot;space-y-2&quot;&gt;&#10;                &lt;Label htmlFor=&quot;description&quot;&gt;Description&lt;/Label&gt;&#10;                &lt;Textarea&#10;                    id=&quot;description&quot;&#10;                    {...register(&quot;description&quot;)}&#10;                    placeholder=&quot;Describe this branch location, facilities, or special features&quot;&#10;                    rows={3}&#10;                    maxLength={COACHING_VALIDATION_LIMITS.DESCRIPTION_MAX}&#10;                /&gt;&#10;                &lt;div className=&quot;flex justify-between&quot;&gt;&#10;                    &lt;div&gt;&#10;                        {errors.description &amp;&amp; (&#10;                            &lt;p className=&quot;text-sm text-destructive&quot;&gt;{errors.description.message}&lt;/p&gt;&#10;                        )}&#10;                    &lt;/div&gt;&#10;                    &lt;p className=&quot;text-xs text-muted-foreground&quot;&gt;&#10;                        {description?.length || 0} / {COACHING_VALIDATION_LIMITS.DESCRIPTION_MAX}&#10;                    &lt;/p&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            {/* Contact Information */}&#10;            &lt;div className=&quot;space-y-4&quot;&gt;&#10;                &lt;h3 className=&quot;text-sm font-semibold&quot;&gt;Contact Information&lt;/h3&gt;&#10;&#10;                &lt;div className=&quot;space-y-2&quot;&gt;&#10;                    &lt;Label htmlFor=&quot;phone&quot;&gt;Phone&lt;/Label&gt;&#10;                    &lt;Input&#10;                        id=&quot;phone&quot;&#10;                        {...register(&quot;phone&quot;)}&#10;                        placeholder=&quot;+1234567890&quot;&#10;                        type=&quot;tel&quot;&#10;                    /&gt;&#10;                    {errors.phone &amp;&amp; (&#10;                        &lt;p className=&quot;text-sm text-destructive mt-1&quot;&gt;{errors.phone.message}&lt;/p&gt;&#10;                    )}&#10;                &lt;/div&gt;&#10;&#10;                &lt;div className=&quot;space-y-2&quot;&gt;&#10;                    &lt;Label htmlFor=&quot;email&quot;&gt;Email&lt;/Label&gt;&#10;                    &lt;Input&#10;                        id=&quot;email&quot;&#10;                        {...register(&quot;email&quot;)}&#10;                        placeholder=&quot;branch@example.com&quot;&#10;                        type=&quot;email&quot;&#10;                    /&gt;&#10;                    {errors.email &amp;&amp; (&#10;                        &lt;p className=&quot;text-sm text-destructive mt-1&quot;&gt;{errors.email.message}&lt;/p&gt;&#10;                    )}&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            {/* Branch Manager */}&#10;            &lt;div className=&quot;space-y-4&quot;&gt;&#10;                &lt;h3 className=&quot;text-sm font-semibold&quot;&gt;Branch Manager (Optional)&lt;/h3&gt;&#10;                &lt;Alert&gt;&#10;                    &lt;AlertCircle className=&quot;h-4 w-4&quot; /&gt;&#10;                    &lt;AlertDescription&gt;&#10;                        By default, the coaching center owner will be set as the branch manager.&#10;                        You can optionally assign a different user as the manager by searching their username.&#10;                    &lt;/AlertDescription&gt;&#10;                &lt;/Alert&gt;&#10;&#10;                {!selectedManager ? (&#10;                    &lt;div className=&quot;space-y-2&quot;&gt;&#10;                        &lt;Label htmlFor=&quot;manager_username&quot;&gt;Search Manager by Username&lt;/Label&gt;&#10;                        &lt;div className=&quot;flex gap-2&quot;&gt;&#10;                            &lt;Input&#10;                                id=&quot;manager_username&quot;&#10;                                value={managerUsername}&#10;                                onChange={(e) =&gt; setManagerUsername(e.target.value)}&#10;                                placeholder=&quot;Enter username (e.g., john_doe)&quot;&#10;                                onKeyDown={(e) =&gt; {&#10;                                    if (e.key === &quot;Enter&quot;) {&#10;                                        e.preventDefault();&#10;                                        handleSearchManager();&#10;                                    }&#10;                                }}&#10;                                disabled={searchingManager}&#10;                            /&gt;&#10;                            &lt;Button&#10;                                type=&quot;button&quot;&#10;                                onClick={handleSearchManager}&#10;                                disabled={searchingManager || !managerUsername.trim()}&#10;                                variant=&quot;outline&quot;&#10;                            &gt;&#10;                                {searchingManager ? (&#10;                                    &lt;Loader2 className=&quot;h-4 w-4 animate-spin&quot; /&gt;&#10;                                ) : (&#10;                                    &lt;Search className=&quot;h-4 w-4&quot; /&gt;&#10;                                )}&#10;                            &lt;/Button&gt;&#10;                        &lt;/div&gt;&#10;                        {managerError &amp;&amp; (&#10;                            &lt;p className=&quot;text-sm text-destructive&quot;&gt;{managerError}&lt;/p&gt;&#10;                        )}&#10;                        &lt;p className=&quot;text-xs text-muted-foreground&quot;&gt;&#10;                            Leave blank to use the center owner as the default manager&#10;                        &lt;/p&gt;&#10;                    &lt;/div&gt;&#10;                ) : (&#10;                    &lt;div className=&quot;p-4 border rounded-lg bg-muted/50 space-y-3&quot;&gt;&#10;                        &lt;div className=&quot;flex items-center justify-between&quot;&gt;&#10;                            &lt;div className=&quot;flex items-center gap-2&quot;&gt;&#10;                                &lt;CheckCircle2 className=&quot;h-5 w-5 text-green-500&quot; /&gt;&#10;                                &lt;span className=&quot;font-medium&quot;&gt;Manager Selected&lt;/span&gt;&#10;                            &lt;/div&gt;&#10;                            &lt;Button&#10;                                type=&quot;button&quot;&#10;                                variant=&quot;ghost&quot;&#10;                                size=&quot;sm&quot;&#10;                                onClick={handleClearManager}&#10;                            &gt;&#10;                                &lt;X className=&quot;h-4 w-4&quot; /&gt;&#10;                            &lt;/Button&gt;&#10;                        &lt;/div&gt;&#10;                        &lt;div className=&quot;space-y-1&quot;&gt;&#10;                            &lt;p className=&quot;text-sm&quot;&gt;&#10;                                &lt;span className=&quot;text-muted-foreground&quot;&gt;Name:&lt;/span&gt;{&quot; &quot;}&#10;                                &lt;span className=&quot;font-medium&quot;&gt;{selectedManager.full_name || &quot;N/A&quot;}&lt;/span&gt;&#10;                            &lt;/p&gt;&#10;                            &lt;p className=&quot;text-sm&quot;&gt;&#10;                                &lt;span className=&quot;text-muted-foreground&quot;&gt;Username:&lt;/span&gt;{&quot; &quot;}&#10;                                &lt;span className=&quot;font-medium&quot;&gt;{`@${selectedManager.username}`}&lt;/span&gt;&#10;                            &lt;/p&gt;&#10;                            &lt;p className=&quot;text-sm&quot;&gt;&#10;                                &lt;span className=&quot;text-muted-foreground&quot;&gt;Role:&lt;/span&gt;{&quot; &quot;}&#10;                                &lt;span className=&quot;font-medium&quot;&gt;&#10;                                    {selectedManager.role === 'C' ? 'Coach' :&#10;                                        selectedManager.role === 'T' ? 'Teacher' :&#10;                                            selectedManager.role === 'A' ? 'Admin' :&#10;                                                selectedManager.role === 'SA' ? 'Super Admin' :&#10;                                                    selectedManager.role}&#10;                                &lt;/span&gt;&#10;                            &lt;/p&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/div&gt;&#10;                )}&#10;            &lt;/div&gt;&#10;&#10;            {/* Branch Location/Address */}&#10;            &lt;div className=&quot;space-y-4&quot;&gt;&#10;                &lt;div className=&quot;flex items-center justify-between&quot;&gt;&#10;                    &lt;h3 className=&quot;text-sm font-semibold&quot;&gt;Branch Location&lt;/h3&gt;&#10;                    {selectedAddress &amp;&amp; !showAddressManager &amp;&amp; (&#10;                        &lt;Button&#10;                            type=&quot;button&quot;&#10;                            variant=&quot;outline&quot;&#10;                            size=&quot;sm&quot;&#10;                            onClick={() =&gt; setShowAddressManager(true)}&#10;                        &gt;&#10;                            &lt;MapPin className=&quot;h-4 w-4 mr-2&quot; /&gt;&#10;                            Change Address&#10;                        &lt;/Button&gt;&#10;                    )}&#10;                &lt;/div&gt;&#10;                {!showAddressManager &amp;&amp; selectedAddress &amp;&amp; (&#10;                    &lt;Card className=&quot;border-primary&quot;&gt;&#10;                        &lt;CardHeader&gt;&#10;                            &lt;div className=&quot;flex items-start justify-between&quot;&gt;&#10;                                &lt;div&gt;&#10;                                    &lt;CardTitle className=&quot;text-base&quot;&gt;Selected Branch Address&lt;/CardTitle&gt;&#10;                                    &lt;CardDescription&gt;{selectedAddress.address_type}&lt;/CardDescription&gt;&#10;                                &lt;/div&gt;&#10;                                &lt;Button&#10;                                    type=&quot;button&quot;&#10;                                    variant=&quot;ghost&quot;&#10;                                    size=&quot;sm&quot;&#10;                                    onClick={() =&gt; setSelectedAddress(null)}&#10;                                &gt;&#10;                                    &lt;X className=&quot;h-4 w-4&quot; /&gt;&#10;                                &lt;/Button&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/CardHeader&gt;&#10;                        &lt;CardContent className=&quot;space-y-2 text-sm&quot;&gt;&#10;                            {selectedAddress.label &amp;&amp; (&#10;                                &lt;p className=&quot;font-medium&quot;&gt;{selectedAddress.label}&lt;/p&gt;&#10;                            )}&#10;                            {selectedAddress.address_line_1 &amp;&amp; (&#10;                                &lt;p className=&quot;text-muted-foreground&quot;&gt;{selectedAddress.address_line_1}&lt;/p&gt;&#10;                            )}&#10;                            {selectedAddress.address_line_2 &amp;&amp; (&#10;                                &lt;p className=&quot;text-muted-foreground&quot;&gt;{selectedAddress.address_line_2}&lt;/p&gt;&#10;                            )}&#10;                            &lt;p className=&quot;text-muted-foreground&quot;&gt;&#10;                                {[selectedAddress.city, selectedAddress.district, selectedAddress.state, selectedAddress.pin_code]&#10;                                    .filter(Boolean)&#10;                                    .join(', ')}&#10;                            &lt;/p&gt;&#10;                        &lt;/CardContent&gt;&#10;                    &lt;/Card&gt;&#10;                )}&#10;&#10;                {!showAddressManager &amp;&amp; !selectedAddress &amp;&amp; (&#10;                    &lt;Button&#10;                        type=&quot;button&quot;&#10;                        variant=&quot;outline&quot;&#10;                        onClick={() =&gt; setShowAddressManager(true)}&#10;                        className=&quot;w-full&quot;&#10;                    &gt;&#10;                        &lt;MapPin className=&quot;h-4 w-4 mr-2&quot; /&gt;&#10;                        Add or Select Branch Address&#10;                    &lt;/Button&gt;&#10;                )}&#10;&#10;                {showAddressManager &amp;&amp; (&#10;                    &lt;Card&gt;&#10;                        &lt;CardHeader&gt;&#10;                            &lt;div className=&quot;flex items-start justify-between&quot;&gt;&#10;                                &lt;div&gt;&#10;                                    &lt;CardTitle&gt;Manage Branch Address&lt;/CardTitle&gt;&#10;                                    &lt;CardDescription&gt;&#10;                                        Select an existing address or create a new one for this branch&#10;                                    &lt;/CardDescription&gt;&#10;                                &lt;/div&gt;&#10;                                &lt;Button&#10;                                    type=&quot;button&quot;&#10;                                    variant=&quot;ghost&quot;&#10;                                    size=&quot;sm&quot;&#10;                                    onClick={() =&gt; setShowAddressManager(false)}&#10;                                &gt;&#10;                                    &lt;X className=&quot;h-4 w-4&quot; /&gt;&#10;                                &lt;/Button&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/CardHeader&gt;&#10;                        &lt;CardContent&gt;&#10;                            &lt;AddressManager&#10;                                onAddressSelect={(address) =&gt; {&#10;                                    setSelectedAddress(address);&#10;                                    setShowAddressManager(false);&#10;                                    showSuccessToast(&quot;Address selected for branch&quot;);&#10;                                }}&#10;                                showAddButton={true}&#10;                                allowEdit={true}&#10;                                allowDelete={true}&#10;                                allowSetPrimary={false}&#10;                            /&gt;&#10;                        &lt;/CardContent&gt;&#10;                    &lt;/Card&gt;&#10;                )}&#10;            &lt;/div&gt;&#10;&#10;            {/* Branch Settings */}&#10;            &lt;div className=&quot;space-y-4&quot;&gt;&#10;                &lt;h3 className=&quot;text-sm font-semibold&quot;&gt;Branch Settings&lt;/h3&gt;&#10;&#10;                {/* Main Branch Toggle */}&#10;                &lt;div className=&quot;flex items-center justify-between p-4 border rounded-lg&quot;&gt;&#10;                    &lt;div className=&quot;space-y-0.5&quot;&gt;&#10;                        &lt;Label htmlFor=&quot;is_main_branch&quot; className=&quot;text-base&quot;&gt;&#10;                            Main Branch&#10;                        &lt;/Label&gt;&#10;                        &lt;p className=&quot;text-sm text-muted-foreground&quot;&gt;&#10;                            Mark this as the primary/headquarters branch&#10;                        &lt;/p&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;Switch&#10;                        id=&quot;is_main_branch&quot;&#10;                        checked={isMainBranch}&#10;                        onCheckedChange={(checked) =&gt; setValue(&quot;is_main_branch&quot;, checked)}&#10;                    /&gt;&#10;                &lt;/div&gt;&#10;&#10;                {/* Active Status Toggle */}&#10;                &lt;div className=&quot;flex items-center justify-between p-4 border rounded-lg&quot;&gt;&#10;                    &lt;div className=&quot;space-y-0.5&quot;&gt;&#10;                        &lt;Label htmlFor=&quot;is_active&quot; className=&quot;text-base&quot;&gt;&#10;                            Active Status&#10;                        &lt;/Label&gt;&#10;                        &lt;p className=&quot;text-sm text-muted-foreground&quot;&gt;&#10;                            {isActive&#10;                                ? &quot;Branch is currently active and visible&quot;&#10;                                : &quot;Branch is inactive and hidden from public view&quot;}&#10;                        &lt;/p&gt;&#10;                    &lt;/div&gt;&#10;                    &lt;Switch&#10;                        id=&quot;is_active&quot;&#10;                        checked={isActive}&#10;                        onCheckedChange={(checked) =&gt; setValue(&quot;is_active&quot;, checked)}&#10;                    /&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            {/* Info Alert */}&#10;            {!isEditMode &amp;&amp; (&#10;                &lt;Alert&gt;&#10;                    &lt;AlertCircle className=&quot;h-4 w-4&quot; /&gt;&#10;                    &lt;AlertDescription&gt;&#10;                        After creating the branch, you can add address information through the address management system.&#10;                    &lt;/AlertDescription&gt;&#10;                &lt;/Alert&gt;&#10;            )}&#10;&#10;            {/* Form Actions */}&#10;            &lt;div className=&quot;flex gap-3 justify-end pt-4 border-t&quot;&gt;&#10;                &lt;Button&#10;                    type=&quot;button&quot;&#10;                    variant=&quot;outline&quot;&#10;                    onClick={onCancel}&#10;                    disabled={isSubmitting}&#10;                &gt;&#10;                    Cancel&#10;                &lt;/Button&gt;&#10;                &lt;Button type=&quot;submit&quot; disabled={isSubmitting}&gt;&#10;                    {isSubmitting ? (&#10;                        &lt;&gt;&#10;                            &lt;Loader2 className=&quot;mr-2 h-4 w-4 animate-spin&quot; /&gt;&#10;                            {isEditMode ? &quot;Updating...&quot; : &quot;Creating...&quot;}&#10;                        &lt;/&gt;&#10;                    ) : (&#10;                        isEditMode ? &quot;Update Branch&quot; : &quot;Create Branch&quot;&#10;                    )}&#10;                &lt;/Button&gt;&#10;            &lt;/div&gt;&#10;        &lt;/form&gt;&#10;    );&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>